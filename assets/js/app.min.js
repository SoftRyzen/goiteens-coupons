"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,e||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}!function(t){var e=function(){function e(){_classCallCheck(this,e),this.setupAdminPanel(),this.setupPromocodesPage(),this.setupAddPage()}return _createClass(e,[{key:"setupAdminPanel",value:function(){document.readyState;var e=t("#toplevel_page_goit_promocode"),a=t("#toplevel_page_goit_promocode > a");a.removeClass("wp-not-current-submenu"),a.addClass("wp-has-current-submenu"),e.removeClass("wp-not-current-submenu"),e.addClass("wp-has-current-submenu"),e.addClass("wp-menu-open")}},{key:"setupPromocodesPage",value:function(){var e=function(){var e=t("#goit-promocodes-search-input").val();t("#goit-promocodes-search").attr("action","/wp-admin/admin.php?page=goit_promocode&search=".concat(e))};t("#goit-promocodes-search-input").keyup(e),t("#goit-promocodes-search-input").click(e);var a=t(".goit-promocodes__table-tabs > a"),o=t(".goit-promocodes__table-body .not_found"),r=t('.goit-promocodes__table-body > *[data-status="active"]'),n=t('.goit-promocodes__table-body > *[data-status="inactive"]'),s=t(".goit-promocodes__table-body *[data-new-status]");a.click((function(e){e.preventDefault();var s=t(this),d=s.data("status");o.addClass("hidden"),a.removeClass("active"),s.addClass("active"),"all"==d?(r.removeClass("hidden"),n.removeClass("hidden")):"active"==d?(r.removeClass("hidden"),n.addClass("hidden"),0==r.length&&o.removeClass("hidden")):"inactive"==d&&(n.removeClass("hidden"),r.addClass("hidden"),0==n.length&&o.removeClass("hidden"))})),s.click((function(e){e.preventDefault();var a=t(this).data("new-status");a="active"==a?2:1,console.log(t(this).parent().parent().parent()),t(this).parent().parent().parent().addClass("in-progress");var o={type:t(this).data("type"),id:t(this).data("id"),status:a};t.post(pluginVars.adminURL,o,(function(t){location.reload()}))}))}},{key:"setupAddPage",value:function(){var e=t(".goit-add__body "),a=t(".goit-add__body .selected-products"),o=t(".goit-add__body #add_promocode"),r=t(".goit-add__body input"),n=t(".goit-add__body textarea"),s=t(".goit-add__body input#promocod"),d=t(".goit-add__body input#count"),i=t(".goit-add__body input#activete_count_user"),l=t(".goit-add__body input#products"),c=t(".goit-add__body select#product"),u=t(".goit-add__body textarea#conditions"),p=t(".goit-add__body select#tariff"),_=t(".goit-add__body input#date_start"),v=t(".goit-add__body input#date_end"),y=t(".goit-add__body input#manager"),m=t(".goit-add__body select#status"),f=t(".goit-add__body input#promocode_limit"),b=t(".goit-add__body input#amount_surcharge"),g=t(".goit-add__body select#discount_tariff"),h=t(".goit-add__body textarea#msg_success"),C=t(".goit-add__body textarea#msg_not_found"),w=t(".goit-add__body textarea#msg_data_end"),k=function(){var e=t(this).val();t(this).attr("value",e)},A=function(){t.ajax({url:pluginVars.ajaxurl,type:"POST",dataType:"JSON",data:{action:"ajax_check_promocode_name",promocod:s.val(),count:d.val()},beforeSend:function(){o.attr("disabled","disabled"),s.removeClass("success"),s.removeClass("error"),s.addClass("in-progress")},success:function(t){console.log(t),s.removeClass("in-progress"),0==t?(s.removeClass("error"),s.addClass("success"),o.attr("disabled",!1)):(s.removeClass("success"),s.addClass("error"),o.attr("disabled","disabled"))}})};r.keyup(k),n.keyup(k),c.change((function(){var e=t(this).val();if(""!==c.val()&&c.removeClass("error"),e){var o=[];a.html(e.map((function(t){var e=t.split("?id=")[0],a=t.split("&name=")[0].split("?id=")[1],r=t.split("&name=")[1];return o=[].concat(_toConsumableArray(o),[a]),'<a href="'.concat(e,'" target="_blank">').concat(r,"</a>")})).join("")),l.attr("value",o)}})),s.keyup(A),d.keyup(A),d.bind("keyup mouseup",A),o.click((function(){if(r.removeClass("error"),n.removeClass("error"),""==s.val()&&s.addClass("error"),""==i.val()&&i.addClass("error"),""==l.val()&&c.addClass("error"),""==_.val()&&_.addClass("error"),""==f.val()&&f.addClass("error"),""==b.val()&&b.addClass("error"),""==d.val()&&d.addClass("error"),""!=s.val()&&""!=i.val()&&""!=l.val()&&""!=_.val()&&""!=f.val()&&""!=b.val()&&""!=d.val()){e.addClass("in-progress"),o.attr("disabled","disabled");var a,k={action:"add",promocod:s.val().toUpperCase(),activete_count_user:i.val(),product:l.val(),tariff:p.val(),conditions:u.val(),date_start:_.val(),date_end:v.val(),manager:y.val(),status:m.val(),promocode_limit:f.val(),amount_surcharge:b.val(),discount_tariff:g.val(),msg_success:h.val(),msg_not_found:C.val(),msg_data_end:w.val(),count:d.val()};a=1==d.val()?"&id=".concat(s.val(),"&action=new_add"):"&group=".concat(s.val(),"&action=new_add"),t.post(pluginVars.postURL,k,(function(t){window.location.replace(pluginVars.postURL+a)}))}}))}}]),e}();window.promocodesAdmin=new e}(window.jQuery);
"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}!function(t){var e=function(){function e(){_classCallCheck(this,e),this.setupLayout(),this.expItems(),this.progressBarSetup(),this.tabsSetup(),this.addSelectType()}return _createClass(e,[{key:"setupLayout",value:function(){}},{key:"progressBarSetup",value:function(){t(".progress").each((function(){var e=t(this).find(".progress-bar"),i=e.attr("data-progress");e.css("width",i+"%")}))}},{key:"expItems",value:function(){t("body").on("change",'select[name="items-show-count"]',(function(e){"custom"==t(this).val()?t('form[name="custom-items-count"]').addClass("is-active"):t('form[name="custom-items-count"]').removeClass("is-active")})),t("body").on("click",".bb-imp__exp-item td",(function(e){t(this).parent(".bb-imp__exp-item").toggleClass("is-active")})),t("body").on("click",".bb-imp__exp-grid-item",(function(e){t(this).toggleClass("is-active")})),t("body").on("click",".select-all",(function(e){e.preventDefault(),t(".bb-imp__exp-items--main .row").hasClass("is-active")?t(this).hasClass("is-active")?(t(this).removeClass("is-active"),t(".bb-imp__exp-item").each((function(){t(this).removeClass("is-active")}))):(t(this).addClass("is-active"),t(".bb-imp__exp-item").each((function(){t(this).addClass("is-active")}))):t(this).hasClass("is-active")?(t(this).removeClass("is-active"),t(".bb-imp__exp-grid-item").each((function(){t(this).removeClass("is-active")}))):(t(this).addClass("is-active"),t(".bb-imp__exp-grid-item").each((function(){t(this).addClass("is-active")})))})),t("body").on("click",".row-layout",(function(e){e.preventDefault(),t(".grid-layout").removeClass("is-active"),t(".bb-imp__exp-items--main .row").addClass("is-active"),t(this).addClass("is-active"),t(".bb-imp__exp-items--main .grid").removeClass("is-active")})),t("body").on("click",".grid-layout",(function(e){e.preventDefault(),t(".row-layout").removeClass("is-active"),t(".bb-imp__exp-items--main .grid").addClass("is-active"),t(this).addClass("is-active"),t(".bb-imp__exp-items--main .row").removeClass("is-active")}))}},{key:"tabsSetup",value:function(){t(".bb-imp__history--top--tabs li a").click((function(e){e.preventDefault();var i=t(this).attr("href");t(".bb-imp__history--top--tabs li a").removeClass("is-active"),t(this).addClass("is-active"),t(".bb-imp__history--main").removeClass("is-active"),t(".bb-imp__history--main"+i).addClass("is-active")}))}},{key:"addSelectType",value:function(){t(".btn-add-type").click((function(e){var i=t(this).attr("data-max"),a=t(this).attr("data-curr");if(i!==a){e.preventDefault();var s=t(".bb-imp__select-block--top--dropdowns .drop-down-wrap").clone(!0).addClass("cloned");s.length>1&&(s=s[0]),t(".bb-imp__select-block--top--dropdowns").append(s),a++,t(this).attr("data-curr",a)}else t(this).attr("disabled",!0)})),t(".drop-down-wrap .remove").on("click",(function(e){t(this).parent(".drop-down-wrap").remove();var i=t(".btn-add-type").attr("data-curr");i--,t(".btn-add-type").attr("data-curr",i)}))}}]),e}();window.BilberrryAdminLayout=new e}(window.jQuery);